欢迎使用以qtcreator作为IDE开发的VideoLabeller.

工具当前版本: Deprecated Mouse Use.

本工具采用sdk_sensevideo_release中sample/tracking项目的输出作为标签输入以减小标注人员的工作量.

1.使用流程

(1)在qtcreator中打开项目文件Tracklabeler.pro并直接运行.

(2)通过快捷键Ctrl+O或File->Load Video载入视频文件.

(3)通过快捷键Ctrl+L或File->Load Label载入标签文件.

(4)进行标注工作.

(5)通过快捷键Ctrl+X或File->Save Label保存标签文件.

(6)通过快捷键Ctrl+C计算当前已标注框数并在左下角显示.

2.标注方法

(1)按键E可以前进帧，前进帧数可在右下角Frame Interval处设置，默认为4.

(2)按键Q可以后退帧，后退帧数可在右下角Frame Interval处设置，默认为4.

(3)用鼠标左键单击屏幕中需要调整的框后(高亮显示时)可以通过键盘修改框的位置(会自动触发线性插值):
	
	i.按键Up可以使框上移，上移像素数可在右下角Move Step处设置，默认为3.
	
	ii.按键Down可以使框下移，下移像素数可在右下角Move Step处设置，默认为3.

	iii.按键Left可以使框左移，左移像素数可在右下角Move Step处设置，默认为3.

	iv.按键Right可以使框右移，右移像素数可在右下角Move Step处设置，默认为3.

(3)用鼠标左键单击屏幕中需要调整的框后(高亮显示时)可以通过键盘修改框的尺寸(会自动触发线性插值):
	
	i.按键W可以使框高变小，变小像素数可在右下角Edge Step处设置，默认为3.
	
	ii.按键S可以使框高变大，变大像素数可在右下角Edge Step处设置，默认为3.

	iii.按键A可以使框宽变小，变小像素数可在右下角Edge Step处设置，默认为3.

	iv.按键D可以使框宽变大，变大像素数可在右下角Edge Step处设置，默认为3.

(5)用鼠标左键拖动需要调整的框可以改变框的位置(会自动触发线性插值).

(6)用鼠标左键拖动需要调整的框的右下角可以改变框的尺寸(不会触发线性插值).

3.添加、删除和修改物体

(1)用鼠标右键单击需要删除的框后会弹出对话框，此时可以指定方式删除物体:
	
	i.选择Current Frame则只有物体在当前帧的框会被删除.

	ii.选择Every Frame Before则物体在当前帧之前的所有帧中的框都会被删除.

	iii.选择Every Frame After则物体在当前帧之后的所有帧中的框都会被删除.
	
	iv.当一个处于激活状态的物体所有帧中的框都已删除后它将失去激活状态.

(2)用鼠标左键双击屏幕中想要创建新物体的位置，则会在当前帧生成新物体的框:
	
	i.新物体的标记(trackid)可自动获得.

	ii.新物体的类别默认为行人.

	iii.新物体的框尺寸默认为150x150.

(3)用鼠标左键双击需要修改的物体后会弹出对话框，此时可修改:
	
	i.物体在当前帧的标记(trackid).

	ii.物体在所有帧的类别(label).

	iii.物体的自动生成激活状态(auto generate).

(4)当试图修改物体在当前帧的标记pre_tid为new_tid时，若该帧已存在一个标记为new_id的物体，该次操作会被自动撤销.

4.自动生成激活和线性插值

(1)但将物体从非激活状态改为激活状态时，程序将记录下物体被激活时所处于的帧号activation_start.

(2)当物体处于激活状态时，每当通过按键E或按键Q将观察的帧号从prev改为next，若next帧在activation_start帧之后，则会在next帧为该物体自动构造一个与该物体在prev帧中完全相同的框.

(3)当一个物体处于激活状态时，若物体的所有框都被删除，则该物体将被自动取消激活状态.

(4)当Frame Interval的值设为i，而当前帧的帧号为fid时，若改变物体框的位置或尺寸时触发了线性插值，则将:

	i.以该物体在(fid-i)帧的框和该物体在fid帧的新框为基准，对区间(fid-i, fid)内每一帧中该物体的框进行线性插值.

	ii.以该物体在fid帧的新框和该物体在(fid+i)帧的框为基准，对区间(fid, fid+i)内每一帧中该物体的框进行线性插值.

	iii.若插值区间内物体原本没有框，则会构造框并进行线性插值.

5.保存

(1)在tools->options->General Options中可以设置程序是否定时自动保存(Enable Auto Save).

(2)在tools->options->General Options中可以设置程序每隔(Auto Save Interval)毫秒自动保存一次(不建议小于60000).

(3)在tools->options->General Options中可以设置程序保存时是否提示(Show Save Tips).

6.显示和选择帧

(1)右下角Lower Width Limit和Lower Height Limit用于限制标注物体框的最小尺寸.对于车辆任务和行人任务有不同的要求.

(2)右上角的列表显示出了每个物体(Track)首次出现时所处于的帧号(Start)以及其总帧数(Total),通过点击可以切换到该物体的初始帧.

(3)右上角的列表的列宽度可以手动调整.

(4)拖动或点击下方的滑动条可以切换当前观察的帧号.

(5)当在帧号为prev的帧中选中了物体obj时，若切换至帧号为next的帧且该帧中存在该物体的框box，则box会自动被选中.

8.建议标注流程

(1)首先以合适的速度快进，直到发现框的位置或尺寸不合适的物体.

(2)点击该物体的框，使得右上角的列表高亮显示该物体标记所在的行.

(3)单击高亮的行会跳转到该物体在视频中第一次出现的帧.

(4)凭经验设定合适的Frame Interval.

(5)当按上述流程标注时相邻两次标注之间的帧会被自动线性插值.
